server {
	listen 80 default_server;
	listen [::]:80 default_server ipv6only=on;

	root /usr/share/nginx/html;
	index index.html index.htm;

	# Make site accessible from http://localhost/
	server_name localhost;

	location /token {
		proxy_pass http://tv-api;
		# First attempt to serve request as file, then
		# as directory, then fall back to displaying a 404.
		#try_files $uri $uri/ /index.html;
		# Uncomment to enable naxsi on this location
		# include /etc/nginx/naxsi.rules
		add_header 'Access-Control-Allow-Origin' *;
                add_header 'Access-Control-Allow-Credentials' 'true';
                add_header 'Access-Control-Allow-Methods' 'GET';	
	}

	location / {
        if ($request_method !~ ^(GET)$ ) {
           return 403;
        }
		proxy_pass http://tv-api;
		# First attempt to serve request as file, then
		# as directory, then fall back to displaying a 404.
		#try_files $uri $uri/ /index.html;
		# Uncomment to enable naxsi on this location
		# include /etc/nginx/naxsi.rules
		add_header 'Access-Control-Allow-Origin' *;
                add_header 'Access-Control-Allow-Credentials' 'true';
                add_header 'Access-Control-Allow-Methods' 'GET';	
	}

 	location /images/ {
                proxy_pass http://img.omdbapi.com/?apikey=7d97a9b3&i=;
		#rewrite ^/images/(.*)  http://img.omdbapi.com/?i=$1&apikey=7d97a9b3 permanent;
                #rewrite ^/images/(.*)  http://www.google.com/$1 permanent;
        }

	location ~* \.(png)$ {
               root /opt/images/;
               expires 1M;
               access_log off;
               add_header Cache-Control "public";     
			   # error_page             404 = /no_found.png;  
        }
}
